.imgContainer {
  position: relative;
}

.imgContainer > img {
  position: absolute;
  width: 100%;
  top: 0;
  left: 0;
}

$glitchDuration: 6;

img.originalImg {
  left: 0;
  top: 0;

  animation: paths #{$glitchDuration}s step-end infinite alternate-reverse;
}

.imgContainer > img.filterImg:nth-of-type(1) {
  animation:
    paths #{$glitchDuration}s step-end infinite alternate-reverse,
    opacity #{$glitchDuration}s step-end infinite alternate-reverse,
    movement-1 #{$glitchDuration + 3}s step-end infinite alternate-reverse;
}

.imgContainer > img.filterImg:nth-of-type(2) {
  animation:
    paths #{$glitchDuration}s step-end infinite,
    opacity #{$glitchDuration}s step-end infinite,
    movement-2 #{$glitchDuration + 3}s step-end infinite;
}

@function polygonPercentages($pointsNum) {
  $result: "";

  @for $_ from 1 through $pointsNum - 1 {
    $result: $result +percentage(random(100) / 100)+" "+percentage(random(100) / 100)+", ";
  }

  $result: $result + percentage(random(100) / 100) + " " + percentage(random(100) / 100);

  @return $result;
}

@keyframes paths {
  0% {
    clip-path: polygon(0% 50%,
        25% 50%,
        25% 2%,
        21% 2%,
        21% 93%,
        55% 93%,
        55% 97%,
        58% 97%,
        58% 43%,
        17% 43%,
        17% 7%,
        77% 7%,
        77% 98%,
        74% 98%,
        74% 6%,
        12% 6%,
        12% 46%,
        75% 46%,
        75% 70%,
        73% 70%,
        73% 72%,
        22% 72%,
        22% 4%,
        85% 4%,
        85% 18%,
        42% 18%,
        42% 25%,
        15% 25%,
        15% 20%,
        29% 20%,
        29% 31%,
        12% 31%,
        12% 33%,
        57% 33%,
        57% 83%,
        61% 83%,
        61% 45%,
        75% 45%,
        75% 75%,
        13% 75%,
        13% 58%,
        50% 58%,
        50% 87%,
        84% 87%,
        84% 70%,
        38% 70%,
        38% 82%,
        40% 82%,
        40% 51%,
        93% 51%);
  }

  5% {
    clip-path: polygon(0% 97%,
        61% 97%,
        61% 63%,
        27% 63%,
        27% 30%,
        54% 30%,
        54% 45%,
        15% 45%,
        15% 19%,
        53% 19%,
        53% 27%,
        95% 27%,
        95% 46%,
        64% 46%,
        64% 53%,
        19% 53%,
        19% 1%,
        92% 1%,
        92% 73%,
        73% 73%,
        73% 21%,
        57% 21%,
        57% 14%,
        94% 14%,
        94% 9%,
        74% 9%,
        74% 58%,
        63% 58%,
        63% 26%,
        98% 26%,
        98% 31%,
        34% 31%,
        34% 2%,
        53% 2%,
        53% 6%,
        55% 6%,
        55% 71%,
        49% 71%,
        49% 45%,
        26% 45%,
        26% 3%,
        67% 3%,
        67% 80%,
        48% 80%,
        48% 35%,
        43% 35%,
        43% 49%,
        14% 49%,
        14% 5%,
        47% 5%,
        47% 67%,
        37% 67%,
        37% 75%,
        68% 75%);
  }

  30% {
    clip-path: polygon(0% 48%,
        5% 48%,
        5% 66%,
        50% 66%,
        50% 67%,
        18% 67%,
        18% 93%,
        50% 93%,
        50% 89%,
        39% 89%,
        39% 79%,
        92% 79%,
        92% 61%,
        32% 61%,
        32% 50%,
        82% 50%,
        82% 61%,
        92% 61%,
        92% 54%,
        29% 54%,
        29% 70%,
        41% 70%,
        41% 47%,
        15% 47%,
        15% 66%,
        47% 66%,
        47% 71%,
        9% 71%,
        9% 95%,
        87% 95%,
        87% 13%,
        15% 13%,
        15% 63%,
        5% 63%,
        5% 63%,
        89% 63%,
        89% 8%,
        87% 8%,
        87% 28%,
        29% 28%,
        29% 35%,
        52% 35%,
        52% 67%,
        32% 67%,
        32% 92%,
        57% 92%,
        57% 31%,
        80% 31%,
        80% 73%,
        75% 73%,
        75% 45%,
        45% 45%,
        45% 77%);
  }

  45% {
    clip-path: polygon(0% 44%,
        15% 44%,
        15% 94%,
        12% 94%,
        12% 64%,
        9% 64%,
        9% 41%,
        82% 41%,
        82% 94%,
        89% 94%,
        89% 72%,
        91% 72%,
        91% 59%,
        41% 59%,
        41% 56%,
        76% 56%,
        76% 33%,
        66% 33%,
        66% 24%,
        22% 24%,
        22% 95%,
        69% 95%,
        69% 96%,
        78% 96%,
        78% 44%,
        63% 44%,
        63% 45%,
        74% 45%,
        74% 60%,
        48% 60%,
        48% 57%,
        16% 57%,
        16% 5%,
        44% 5%,
        44% 26%,
        50% 26%,
        50% 73%,
        0% 73%,
        0% 86%,
        1% 86%,
        1% 64%);
  }

  76% {
    clip-path: polygon(0% 26%,
        15% 26%,
        15% 73%,
        72% 73%,
        72% 70%,
        77% 70%,
        77% 75%,
        8% 75%,
        8% 42%,
        4% 42%,
        4% 61%,
        17% 61%,
        17% 12%,
        26% 12%,
        26% 63%,
        73% 63%,
        73% 43%,
        90% 43%,
        90% 67%,
        50% 67%,
        50% 41%,
        42% 41%,
        42% 46%,
        50% 46%,
        50% 84%,
        96% 84%,
        96% 78%,
        49% 78%,
        49% 25%,
        63% 25%,
        63% 14%);
  }

  90% {
    clip-path: polygon(0% 95%,
        8% 95%,
        8% 1%,
        97% 1%,
        97% 55%,
        66% 55%,
        66% 41%,
        24% 41%,
        24% 96%,
        53% 96%,
        53% 57%,
        11% 57%,
        11% 59%,
        4% 59%,
        4% 2%,
        88% 2%);
  }

  1%,
  7%,
  33%,
  47%,
  78%,
  93% {
    clip-path: none;
  }
}

@keyframes movement-1 {
  0% {
    top: 0px;
    left: -20px;
  }

  15% {
    top: 10px;
    left: 10px;
  }

  60% {
    top: 5px;
    left: -10px;
  }

  75% {
    top: -5px;
    left: 20px;
  }

  100% {
    top: 10px;
    left: 5px;
  }
}

@keyframes movement-2 {
  0% {
    top: 10px;
    left: 10px;
  }

  15% {
    top: 5px;
    left: -10px;
  }

  60% {
    top: -5px;
    left: 20px;
  }

  75% {
    top: 10px;
    left: 5px;
  }

  100% {
    top: 0px;
    left: -20px;
  }
}

@keyframes opacity {
  0% {
    opacity: 0.6;
  }

  5% {
    opacity: 0.8;
  }

  30% {
    opacity: 0.75;
  }

  45% {
    opacity: 0.9;
  }

  76% {
    opacity: 0.8;
  }

  90% {
    opacity: 0.9;
  }

  1%,
  7%,
  33%,
  47%,
  78%,
  93% {
    opacity: 0;
  }
}
